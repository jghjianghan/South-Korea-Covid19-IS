CREATE TABLE Country(
	country_id int NOT NULL AUTO_INCREMENT,
	nama varchar(25) NOT NULL,
	PRIMARY KEY(country_id)
);

CREATE TABLE Province(
	province_id int NOT NULL AUTO_INCREMENT,
	nama varchar(25) NOT NULL,
	PRIMARY KEY(province_id)
);

CREATE TABLE City(
	city_id int AUTO_INCREMENT NOT NULL,
	province_id int NOT NULL,
	nama varchar(30) NOT NULL,
	latitude float, 
	longitude float,
	elementary_school int, 
	kindergarten_count int, 
	university_count int, 
	academy_ratio int, 
	elderly_population int,
	PRIMARY KEY(city_id),
	FOREIGN KEY(province_id) REFERENCES Province(province_id)
);

CREATE TABLE Patient (
	patient_id int NOT NULL AUTO_INCREMENT,
	sex varchar(10) NOT NULL,
	age int NOT NULL,
	country_id int NOT NULL,
	province_id int NOT NULL,
	city_id int NOT NULL,
	infected_by int NOT NULL,
	confirm_date date NOT NULL,
	release_date date ,
	deceased_date date,
	PRIMARY KEY (patient_id),
	FOREIGN KEY(country_id) REFERENCES Country(country_id),
	FOREIGN KEY(province_id) REFERENCES Province(province_id),
	FOREIGN KEY(city_id) REFERENCES City(city_id),
	FOREIGN KEY(infected_by) REFERENCES Patient(patient_id)
);

CREATE TABLE Cases(
	case_id int NOT NULL AUTO_INCREMENT,
	province_id int NOT NULL,
	city_id  int NOT NULL,

	PRIMARY KEY(case_id),
	FOREIGN KEY(province_id) REFERENCES Province(province_id),
	FOREIGN KEY(city_id) REFERENCES City(city_id)
);
